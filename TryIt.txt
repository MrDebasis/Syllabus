<template>
    <div class="pagination">
        <lightning-button 
            disabled={isPreviousDisabled} 
            onclick={handlePreviousClick} 
            label="Previous">
        </lightning-button>

        <template for:each={pagesToRender} for:item="page">
            <lightning-button
                key={page.number}
                data-page={page.number}
                disabled={page.disabled}
                variant={page.variant}
                onclick={handlePageClick}
                label={page.number}>
            </lightning-button>
        </template>

        <lightning-button 
            disabled={isNextDisabled} 
            onclick={handleNextClick} 
            label="Next">
        </lightning-button>
    </div>
</template>

get pagesToRender() {
    const pages = [];
    const maxVisible = 5;
    const totalPages = this.totalPages;

    let start = Math.max(1, this.currentPage - Math.floor(maxVisible / 2));
    let end = start + maxVisible - 1;

    if (end > totalPages) {
        end = totalPages;
        start = Math.max(1, end - maxVisible + 1);
    }

    for (let i = start; i <= end; i++) {
        pages.push({
            number: i,
            disabled: !this.paginatedMap?.has(i),
            variant: i === this.currentPage ? 'brand' : 'neutral'
        });
    }

    return pages;
}
