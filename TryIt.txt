
trigger CareProgramEnrolleeTrigger on CareProgramEnrollee (after update, after insert) 
{
    if (Trigger.isUpdate) {
        for(CareProgramEnrollee cpe : Trigger.New)
        {
            CareProgramEnrollee oldValue = Trigger.OldMap.get(cpe.Id);
            if(oldValue.Status != cpe.Status && cpe.Status == 'Verification Completed')
                System.debug('Line 7' +cpe.Id);
            Orders.createOrder(cpe.AccountId);
        }
    }
    if (Trigger.isInsert) {
        for(CareProgramEnrollee cpe : Trigger.New){
              System.debug('Firing Quable');
            if(cpe.CareProgramId != null && cpe.Status == 'Document Verification In Progress'){
            	System.enqueueJob(new DemoQueueable(cpe.CareProgramId, cpe.AccountId));
                }
        } 
    }
}
