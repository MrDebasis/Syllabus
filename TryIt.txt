
#!/bin/bash

# Define a function to handle the input and print username
handle_input() {
    username="$1"
    echo "Username: $username"
}

# Serve the HTML page
serve_html() {
    # Open the HTML page in the default web browser
    start index.html 

    # Start listening for input from the HTML page
    while true; do
        # Read the input from the HTML page
        read -r input
        
        # Extract the username from the input
        username=$(echo "$input" | grep -oP 'username=\K[^&]*')

        # Call the function to handle the input
        handle_input "$username"
    done
}

call_api(){
api_response =$(curl --request GET "http://localhost:8080/hello")
echo "API Response: $api_response"
}

# Start serving the HTML page
serve_html
call_api
