import { LightningElement, track } from 'lwc';
import { publish, MessageContext } from 'lightning/messageService';
import SAMPLE_MESSAGE_CHANNEL from '@salesforce/messageChannel/SampleMessageChannel__c';

export default class Publisher extends LightningElement {
    @track recordId;

    // To work with LMS, you need to access the MessageContext
    @wire(MessageContext)
    messageContext;

    handleInputChange(event) {
        this.recordId = event.target.value;
    }

    publishMessage() {
        const message = { recordId: this.recordId };
        publish(this.messageContext, SAMPLE_MESSAGE_CHANNEL, message);
    }
}
