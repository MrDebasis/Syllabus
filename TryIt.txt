@AuraEnabled(cacheable=false)
public static Boolean upsertMilestones(Id caseId, String surveyType) {
    List<PatientSupportMilestone__c> lstOfSurveys = [
        SELECT Id 
        FROM PatientSupportMilestone__c
        WHERE Case__c = :caseId 
        AND RecordType.Name = 'Patient Portal Survey' 
        AND SurveyType__c = :surveyType 
        AND SurveyStatus__c = 'Completed'
    ];

    System.debug('Found ' + lstOfSurveys.size() + ' completed milestones.');
    return lstOfSurveys.size() > 1;
}


    checkMultipleSurveys() {
        upsertMilestones({ caseId: this.caseId, surveyType: this.surveyType })
            .then(result => {
                this.hasMultipleSurveys = result;
                console.log('Multiple surveys found:', this.hasMultipleSurveys);
            })
            .catch(error => {
                this.error = error;
                console.error('Error checking milestones:', error);
            });
    }
