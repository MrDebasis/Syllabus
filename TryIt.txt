import { LightningElement, api, track } from 'lwc';
import getExpenseLineItems from '@salesforce/apex/YourApexClass.getExpenseLineItems';

export default class MyComponent extends LightningElement {
    @api rowLimit;
    @api rowOffSet;
    @api reimbursementRecordId;
    @track data = [];

    loadData() {
        return getExpenseLineItems({
            limitSize: this.rowLimit,
            offset: this.rowOffSet,
            reimbursementRecId: this.reimbursementRecordId
        })
        .then(result => {
            this.data = [...this.data, ...result];

            this.data = this.data.map((record) => {
                let rowClass = record.Transient__r.Receipt_Uploaded_R1__c === 'Yes' ? 'true-class' : 'false-class';
                
                return { 
                    ...record, 
                    Picture: this.receiptIcon, 
                    ShowPicture: record.Transient__r.Receipt_Uploaded_R1__c === 'Yes',
                    missingReceiptUrl: this.showMissingReceipt,
                    errIcon: this.errorIcon,
                    showErrorIcon: true,
                    rowClass: rowClass // Add rowClass to each record
                };
            });

            console.log('data length' + this.data.length);
            console.log(result);
        })
        .catch(error => {
            console.log('error 12' + error);
        });
    }

    get rowclassCSS() {
        return this.data.map(record => record.rowClass);
    }
}
