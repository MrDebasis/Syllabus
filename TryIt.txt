private static String timeDifference(DateTime created, DateTime now) {
    if (created == null || now == null) {
        return '--';
    }
    
    Integer diffInSeconds = (Integer) (now.getTime() - created.getTime()) / 1000;
    if (diffInSeconds < 60) {
        return 'Now'; 
    }
    Integer diffInMinutes = diffInSeconds / 60;
    if (diffInMinutes < 60) {
        return diffInMinutes + ' minute' + (diffInMinutes > 1 ? 's' : '') + ' ago';
    }
    Integer diffInHours = diffInMinutes / 60;
    if (diffInHours < 24) {
        return diffInHours + ' hour' + (diffInHours > 1 ? 's' : '') + ' ago';
    }
    Integer diffInDays = diffInHours / 24;
    if (diffInDays < 30) {
        return diffInDays + ' day' + (diffInDays > 1 ? 's' : '') + ' ago';
    }

    // Convert Datetime to Date for monthsBetween method
    Date createdDate = created.date();
    Date nowDate = now.date();
    Integer diffInMonths = createdDate.monthsBetween(nowDate);

    // Check if we need to adjust the month count based on the day difference
    if (created.day() > now.day()) {
        diffInMonths--;
    }

    if (diffInMonths < 12) {
        return diffInMonths + ' month' + (diffInMonths > 1 ? 's' : '') + ' ago';
    }

    Integer diffInYears = diffInMonths / 12;
    return diffInYears + ' year' + (diffInYears > 1 ? 's' : '') + ' ago';
}
